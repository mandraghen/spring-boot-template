name: Pull request action with Gradle

on:
  push:
    branches:
      - "main"
  #temporary
  pull_request:
    branches:
      - "main"

jobs:
  build:
    permissions:
      contents: read
    uses:
      ./.github/workflows/build-gradle.yaml
    secrets: inherit
  dependency-submission:
    uses:
      ./.github/workflows/dependency-submission.yaml
  dockerize:
    needs: build
    permissions:
      contents: read
      packages: write
      attestations: write
      id-token: write
    uses:
      mandraghen/gh-actions-template/.github/workflows/dockerize.yaml@main
#
#  local-deploy:
#    needs: dockerize
#    uses: ./.github/workflows/promote.yml
#    with:
#      environment: local
#    secrets: inherit